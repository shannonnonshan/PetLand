<!-- Nút Back -->
<div class="tw-fixed tw-top-0 tw-left-11 tw-z-50">
  <button onclick="history.back()" class="tw-bg-white tw-shadow tw-rounded-full tw-p-5 hover:tw-bg-gray-100 tw-transition">
    <span class="tw-text-xl">←</span>
  </button>
</div>

<!-- Khung Gợi ý cuộn được -->
<div id="suggestionBox" 
     class="tw-px-10 tw-mt-20 tw-mb-40 tw-overflow-y-auto" 
     style="max-height: calc(100vh - 160px);">
  <!-- Các gợi ý sẽ được đổ vào đây -->
</div>

<!-- Khung search nhích lên khỏi footer -->
<div class="tw-fixed tw-bottom-20 tw-left-0 tw-w-full tw-px-10 tw-pb-6 bg-white tw-z-50">
  <input id="searchInput" 
         type="text" 
         placeholder="Search for pet or service..." 
         class="tw-w-full tw-border tw-p-4 tw-rounded-full tw-text-xl tw-shadow-md" />
</div>

<!-- JS xử lý tìm kiếm -->
<script>
  const input = document.getElementById('searchInput');
  const suggestionBox = document.getElementById('suggestionBox');

  input.addEventListener('input', async function () {
    const query = this.value.trim();
    if (query.length === 0) {
      suggestionBox.innerHTML = '';
      return;
    }

    const res = await fetch(`/search/suggest?q=${encodeURIComponent(query)}`);
    const suggestions = await res.json();

    if (suggestions.length === 0) {
      suggestionBox.innerHTML = `
        <div class="tw-text-center tw-text-gray-500 tw-italic tw-mt-4">
          No matching results
        </div>
      `;
      return;
    }

    suggestionBox.innerHTML = suggestions.map(item => {
      return `
        <div class="tw-p-4 tw-border tw-rounded-md tw-mb-2 tw-flex tw-items-center tw-cursor-pointer hover:tw-bg-gray-100" onclick="location.href='${item.link}'">
          <img src="${item.image}" alt="${item.name}" class="tw-w-[60px] tw-h-[60px] tw-object-cover tw-rounded mr-4">
          <div>
            <div class="tw-font-bold">${item.name}</div>
            <div class="tw-text-sm">${item.type}</div>
          </div>
        </div>
      `;
    }).join('');
  });
</script>
